<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <link rel="stylesheet" href="styles.css"> <style>
    .lang-btn { background:transparent; border:1px solid #1f73b7; color:#1f73b7; font-size:10px; font-weight:bold; padding:2px 6px; border-radius:3px; cursor:pointer; margin-left:10px; }
    .lang-btn:hover { background: #e6f0f8; }
    body { width: 340px; padding: 15px; font-family: 'Segoe UI', sans-serif; background-color: #f4f6f8; color: #2f3941; }
    .header-row { display: flex; justify-content: space-between; align-items: center; border-bottom: 2px solid #e1e4e8; padding-bottom: 10px; margin-bottom: 15px;}
    h3 { margin: 0; color: #1f73b7; font-size: 16px; display:flex; align-items:center; }
    
    .toggle-container { display: flex; align-items: center; gap: 8px; font-size: 12px; font-weight: bold; }
    .switch { position: relative; display: inline-block; width: 34px; height: 20px; }
    .switch input { opacity: 0; width: 0; height: 0; }
    .slider { position: absolute; cursor: pointer; top: 0; left: 0; right: 0; bottom: 0; background-color: #ccc; transition: .4s; border-radius: 34px; }
    .slider:before { position: absolute; content: ""; height: 14px; width: 14px; left: 3px; bottom: 3px; background-color: white; transition: .4s; border-radius: 50%; }
    input:checked + .slider { background-color: #28a745; }
    input:checked + .slider:before { transform: translateX(14px); }

    label.field-label { font-size: 11px; font-weight: bold; display: block; margin-top: 10px; color: #555;}
    input[type="text"], textarea { width: 100%; border: 1px solid #cfd7df; border-radius: 4px; padding: 8px; box-sizing: border-box; font-size: 13px; font-family: sans-serif; margin-top: 4px;}
    textarea { height: 60px; font-family: monospace; resize: vertical; }
    
    .btn-group { display: flex; gap: 10px; margin-top: 15px; }
    button { padding: 10px; border: none; border-radius: 4px; cursor: pointer; font-weight: bold; flex: 1; transition: 0.2s;}
    
    #saveBtn { background: #1f73b7; color: white; }
    #saveBtn:hover { background: #144a75; }
    #cancelBtn { background: #e0e0e0; color: #333; display: none; }
    #resetPosBtn { background: #6c757d; color: white; width: 100%; margin-top: 5px; font-size: 11px; padding: 6px;}

    .rules-container { margin-top: 20px; border-top: 2px solid #e1e4e8; padding-top: 10px; max-height: 250px; overflow-y: auto;}
    .rule-item { background: white; padding: 10px; border: 1px solid #d8dcde; border-radius: 4px; margin-bottom: 8px; position: relative; box-shadow: 0 1px 2px rgba(0,0,0,0.05); }
    .rule-header { display: flex; justify-content: space-between; align-items: start; }
    .rule-name { font-weight: bold; color: #d93f4c; font-size: 14px; }
    .rule-actions { display: flex; gap: 5px; }
    .action-btn { background: none; border: none; cursor: pointer; padding: 2px 5px; font-size: 14px; border-radius: 3px; }
    .edit-btn { color: #1f73b7; } .edit-btn:hover { background: #ecf6fd; }
    .del-btn { color: #cc0000; } .del-btn:hover { background: #fff0f0; }
    .rule-reason { font-size: 11px; color: #68737d; margin: 4px 0; font-style: italic;}
    .rule-ips { font-size: 10px; font-family: monospace; color: #333; background: #eee; padding: 4px; border-radius: 3px; word-break: break-all;}
    
    body.is-paused h3 { color: #999; }
    body.is-paused button#saveBtn { background-color: #999; pointer-events: none; }
    #statusLabel { margin-right: 5px; }
  </style>
</head>
<body>
  
  <div class="header-row">
      <h3>
          üõ°Ô∏è Hunter <span style="font-size:10px; color:#999; margin-left:3px"></span>
          <button id="langBtn" class="lang-btn">EN</button>
      </h3>
      <div class="toggle-container">
          <span id="statusLabel">ATTIVO</span>
          <label class="switch">
              <input type="checkbox" id="activeToggle" checked>
              <span class="slider"></span>
          </label>
      </div>
  </div>

  <input type="hidden" id="editIndex" value="-1">

  <label class="field-label" id="lbl_org">Nome Organizzazione</label>
  <input type="text" id="inputName" placeholder="">

  <label class="field-label" id="lbl_reason">Ragione monitoraggio</label>
  <input type="text" id="inputReason" placeholder="es. PT in corso">

  <label class="field-label" id="lbl_indicators">Indicatori (IP, Stringhe)</label>
  <textarea id="inputIps" placeholder="1.1.1.1, malware.exe"></textarea>

  <div class="btn-group">
    <button id="cancelBtn">Annulla</button>
    <button id="saveBtn">Aggiungi Regola</button>
  </div>
  
  <button id="resetPosBtn">Reset Posizione Finestre</button>

  <div class="rules-container" id="rulesList"></div>

  <script src="popup.js"></script>
</body>
</html>